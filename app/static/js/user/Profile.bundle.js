webpackJsonp([9],{0:function(e,a,n){(function(e,a){"use strict";n(333),n(334);var t=n(181),m=n(178),i=n(183),r=n(337),o=n(338),l=n(342),s=n(237),c=n(224),p=e.createClass({displayName:"Profile",getInitialState:function(){return{active:this.props.active||0,userInfo:null}},handleTabChange:function(e,a){this.setState({active:e})},handleCompare:function(e){this.refs.compareBar.compareBarAddItem(e)},componentDidMount:function(){var e=this;t({url:"/logined",method:"get",success:function(a){a.logined&&e.setState({userInfo:a})}}),window.addEventListener("hashchange",function(){e.setState({active:"#my"===window.location.hash?1:0})})},render:function(){return e.createElement("div",null,e.createElement(m,{userInfo:this.state.userInfo}),e.createElement(r,{active:this.state.active,onClick:this.handleTabChange}),this.state.userInfo?null:e.createElement(i,{show:!0}),e.createElement("div",{className:"container"},this.state.active?e.createElement(l,{userInfo:this.state.userInfo}):e.createElement(o,{handleCompare:this.handleCompare})),e.createElement(s,{ref:"compareBar"}),e.createElement(c,null))}});a.render(e.createElement(p,{active:"#my"===window.location.hash?1:0}),document.getElementById("content"))}).call(a,n(17),n(174))},178:function(e,a,n){(function(a){"use strict";n(179);var t=n(181),m=n(183),i=a.createClass({displayName:"TopBar",getInitialState:function(){return{userInfo:this.props.userInfo||null,loginPopupShow:!1}},getDefaultProps:function(){return{loginCallback:function(e){console.log(e)}}},componentWillReceiveProps:function(e){this.props.userInfo!==e.userInfo&&this.setUserInfo(e.userInfo)},setUserInfo:function(e){this.setState({userInfo:e})},handleNeedLogin:function(e){e.preventDefault(),this.refs.refLogin.show()},render:function(){return a.createElement("div",{className:"top-bar"},a.createElement("div",{className:"container"},a.createElement(r,{userInfo:this.state.userInfo,handleNeedLogin:this.handleNeedLogin}),a.createElement(s,{userInfo:this.state.userInfo,handleNeedLogin:this.handleNeedLogin})),a.createElement(m,{show:!1,ref:"refLogin",callback:this.props.loginCallback}))}}),r=a.createClass({displayName:"UserInfo",render:function(){return this.props.userInfo?a.createElement(o,{userInfo:this.props.userInfo}):a.createElement(l,{handleNeedLogin:this.props.handleNeedLogin})}}),o=a.createClass({displayName:"LoginedUserInfo",handleLogout:function(e){e.preventDefault(),t({url:"/logout",method:"get",success:function(e){window.location.reload()}})},render:function(){return a.createElement("div",{className:"user-info"},a.createElement("span",{className:"hello"},"你好，"),a.createElement("span",{className:"profile"},a.createElement("a",{href:"/profile#my",title:"你好，"+this.props.userInfo.username},this.props.userInfo.username)),a.createElement("span",{className:"logout"},a.createElement("a",{href:"/logout",onClick:this.handleLogout,title:"退出登录"},"退出登录")))}}),l=a.createClass({displayName:"UnloginedUserInfo",render:function(){return a.createElement("div",{className:"user-info"},a.createElement("span",{className:"hello"},"欢迎来到万木家，"),a.createElement("span",{className:"login"},a.createElement("a",{href:"/login",onClick:this.props.handleNeedLogin,title:"请登录"},"请登录")),a.createElement("span",{className:"reg"},"免费",a.createElement("a",{className:"reg-btn",href:"/register",title:"免费注册"},"注册")))}}),s=a.createClass({displayName:"SiteInfo",addToFav:function(e){e.preventDefault();var a="http://www.wanmujia.com/",n="万木家 - 权威的红木家具导购平台";document.all?window.external.addFavorite(a,n):window.sidebar?window.sidebar.addPanel(a,n,""):alert("请使用 Ctrl+D 将我们加入收藏")},checkLoginStatus:function(e){this.props.userInfo||this.props.handleNeedLogin(e)},render:function(){return a.createElement("div",{className:"site-info"},a.createElement("span",{className:"fav"},a.createElement("a",{href:"/profile#favorite",onClick:this.checkLoginStatus,title:"收藏夹"},"收藏夹")),a.createElement("span",{className:"my"},a.createElement("a",{href:"/profile#my",onClick:this.checkLoginStatus,title:"我的万木家"},"我的万木家")),a.createElement("span",{className:"comp"},a.createElement("a",{href:"/item/compare",title:"商品对比"},"商品对比")),a.createElement("span",{className:"crtl-d"},a.createElement("a",{href:"#",onClick:this.addToFav,title:"收藏本站"},"收藏本站")),a.createElement("span",{className:"tel",title:"400电话咨询"},"服务电话：400 0117 440"))}});e.exports=i}).call(a,n(17))},179:function(e,a,n){var t=n(180);"string"==typeof t&&(t=[[e.id,t,""]]);n(6)(t,{singleton:!1});t.locals&&(e.exports=t.locals)},180:function(e,a,n){a=e.exports=n(4)(),a.push([e.id,".container{position:relative;display:block;margin:0 auto;width:1200px}.top-bar{background-color:#eee;border-bottom:2px solid #e4e4e4}.top-bar>.container{height:40px;color:#666;font-size:14px}.top-bar>.container .user-info{float:left;line-height:40px}.top-bar>.container .user-info .login>a{color:#5e2c00;text-decoration:none}.top-bar>.container .user-info .login>a:hover{color:#3f1e00}.top-bar>.container .user-info .reg{margin-left:20px}.top-bar>.container .user-info .reg>a{color:#5e2c00;text-decoration:none}.top-bar>.container .user-info .reg>a:hover{color:#3f1e00}.top-bar>.container .user-info .logout>a,.top-bar>.container .user-info .profile>a{color:#666;text-decoration:none}.top-bar>.container .user-info .logout>a:hover,.top-bar>.container .user-info .profile>a:hover{color:#474747}.top-bar>.container .user-info .logout{margin-left:20px}.top-bar>.container .site-info{float:right;line-height:40px}.top-bar>.container .site-info>span{margin-left:24px}.top-bar>.container .site-info a{color:#666;text-decoration:none}.top-bar>.container .site-info a:hover{color:#474747}",""])},183:function(e,a,n){"use strict";n(184);var t=n(17),m=n(186),i=t.createClass({displayName:"LoginPopup",getInitialState:function(){return{show:!1,wShow:!1}},componentWillReceiveProps:function(e){this.props.show!=e.show&&(this.state.show?this.hide():this.show())},show:function(){this.setState({wShow:!0},function(){setTimeout(function(){this.setState({show:!0})}.bind(this),50)}.bind(this))},hide:function(){this.setState({show:!1},function(){setTimeout(function(){this.setState({wShow:!1})}.bind(this),1e3)}.bind(this))},secceed:function(e){this.hide(),this.props.callback(e)},render:function(){return t.createElement("div",{style:{display:this.state.wShow?"block":"none"},className:(this.state.show?"show ":"")+"login-popup"},t.createElement("div",{className:"login-wrap"},t.createElement("div",{onClick:this.hide,className:"close"},"+"),t.createElement(m,{callback:this.secceed})),t.createElement("div",{className:"login-dimmer"}))}});e.exports=i},184:function(e,a,n){var t=n(185);"string"==typeof t&&(t=[[e.id,t,""]]);n(6)(t,{singleton:!1});t.locals&&(e.exports=t.locals)},185:function(e,a,n){a=e.exports=n(4)(),a.push([e.id,".login-popup{display:none}.login-popup .login-dimmer{left:0;right:0;top:0;bottom:0;background-color:rgba(0,0,0,.6);z-index:1100}.login-popup .login-dimmer,.login-popup .login-wrap{position:fixed;opacity:0;-webkit-transition:opacity .5s ease-in-out;transition:opacity .5s ease-in-out}.login-popup .login-wrap{top:50%;left:50%;margin-left:-250px;margin-top:-220px;width:500px;z-index:1110}.login-popup .login-wrap .close{position:absolute;right:5px;top:5px;height:30px;width:30px;text-align:center;line-height:30px;font-size:20px;color:gray;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);cursor:pointer;-webkit-transition:all .5s ease-in-out;transition:all .5s ease-in-out;z-index:1200}.login-popup .login-wrap .close:hover{-webkit-transform:rotate(225deg);-ms-transform:rotate(225deg);transform:rotate(225deg)}.login-popup.show{display:block}.login-popup.show .login-dimmer,.login-popup.show .login-wrap{opacity:1}",""])},186:function(e,a,n){"use strict";n(187);var t=n(17),m=n(181),i=n(8),r=i.encryptMd5,o=i.getCookie,l=t.createClass({displayName:"LoginIn",getInitialState:function(){return{user:"",userErrTip:"",psw:"",pswErrTip:"",nextErrTip:"",remd:!0,nextAction:!0}},setUser:function(e){this.setState({user:e})},setPsw:function(e){this.setState({psw:e})},setRemd:function(){this.setState({remd:!this.state.remd})},clear:function(e,a){switch(e){case"user":this.setState({userErrTip:"",nextErrTip:""}),a||this.setState({user:""});break;case"psw":this.setState({pswErrTip:"",nextErrTip:""}),a||this.setState({psw:""});break;default:return}},doNext:function(){return this.state.user?this.state.psw?this.state.userErrTip||this.state.pswErrTip?!1:(this.setState({nextAction:!1}),void m({url:"/login",method:"post",data:{username:this.state.user,password:r(this.state.psw),remember:this.state.remd,csrf_token:o("csrf_token")},success:function(e){return e.success?(this.setState({nextErrTip:"登录成功"}),this.props.nextUrl?void(window.location.href=this.props.nextUrl):void window.location.reload()):(this.setState({nextErrTip:e.message}),void this.setState({nextAction:!0}))}.bind(this),error:function(e){this.setState({nextErrTip:"服务器出错"}),this.setState({nextAction:!0})}.bind(this)})):(this.setState({pswErrTip:"请输入密码"}),!1):(this.setState({userErrTip:"请输入 邮箱/手机号/用户名"}),!1)},handleKeyUp:function(e){"Enter"==e.key&&this.doNext()},render:function(){return t.createElement("div",{className:"login-box",onKeyUp:this.handleKeyUp},t.createElement("div",{className:"header-logo"},t.createElement("div",{className:"logo"})),t.createElement(s,{setValue:this.setUser,value:this.state.user,errTip:this.state.userErrTip,clear:this.clear}),t.createElement(c,{setValue:this.setPsw,value:this.state.psw,errTip:this.state.pswErrTip,clear:this.clear}),t.createElement(p,{setValue:this.setRemd,remd:this.state.remd}),t.createElement(d,{next:this.doNext,nextAction:this.state.nextAction,errTip:this.state.nextErrTip}))}}),s=t.createClass({displayName:"UserInputGroup",handleChange:function(e){this.props.setValue(e.target.value)},render:function(){var e=this.props.errTip,a=document.createElement("input"),n="placeholder"in a;return t.createElement("div",{className:(e.length?"err ":"")+"input-group"},t.createElement("input",{onChange:this.handleChange,onFocus:this.props.clear.bind(null,"user",1),value:this.props.value,autoFocus:!0,type:"text",className:"ipt",defaultValue:n?null:"邮箱/手机号/用户名",placeholder:"邮箱/手机号/用户名"}),t.createElement("span",{onClick:this.props.clear.bind(null,"user",0),className:"del-icon"},"+"),t.createElement("div",{className:"tip err"},e))}}),c=t.createClass({displayName:"PseInputGroup",handleChange:function(e){this.props.setValue(e.target.value)},render:function(){var e=this.props.errTip,a=document.createElement("input"),n="placeholder"in a;return t.createElement("div",{className:(e.length?"err ":"")+"input-group"},t.createElement("input",{onChange:this.handleChange,onFocus:this.props.clear.bind(null,"psw",1),value:this.props.value,type:"password",className:"ipt",defaultValue:n?null:"密码",placeholder:"密码"}),t.createElement("span",{onClick:this.props.clear.bind(null,"psw",0),className:"del-icon"},"+"),t.createElement("div",{className:"tip err"},e))}}),p=t.createClass({displayName:"RemdLoginGroup",render:function(){return t.createElement("div",{className:"input-group remd"},t.createElement("input",{type:"checkbox",className:"remd",name:"remd",id:"remd"}),t.createElement("label",{onClick:this.props.setValue,className:(this.props.remd?"checked ":"")+"check",htmlFor:"remd"}),t.createElement("label",{className:"instruct",htmlFor:"remd"},"自动登录"),t.createElement("div",{className:"a-group"},t.createElement("a",{href:"/reset_password"},"忘记密码"),"|",t.createElement("a",{href:"/register"},"免费注册")),t.createElement("div",{className:"tip err"}))}}),d=t.createClass({displayName:"NextButton",render:function(){var e=this.props.errTip;return t.createElement("div",{className:(e.length?"err ":"")+"input-group"},t.createElement("input",{disabled:!this.props.nextAction,onClick:this.props.next,type:"button",value:"完成",className:"next"}),t.createElement("div",{className:"tip err"},e))}});e.exports=l},187:function(e,a,n){var t=n(188);"string"==typeof t&&(t=[[e.id,t,""]]);n(6)(t,{singleton:!1});t.locals&&(e.exports=t.locals)},188:function(e,a,n){a=e.exports=n(4)(),a.push([e.id,".login-box{width:100%;height:auto;background:#fff;border:1px solid #e6e6e6;box-shadow:0 0 3px #ccc;padding-bottom:20px}.login-box .header-logo{height:150px;margin-bottom:10px;position:relative}.login-box .header-logo .logo{width:150px;height:75px;background:url("+n(189)+") center no-repeat;background-size:100% auto;position:absolute;top:45px;left:50%;margin-left:-75px}.login-box .input-group{position:relative;width:362px;margin:0 auto;padding-bottom:30px}.login-box .input-group input{font-size:15px;outline:none}.login-box .input-group .ipt{width:362px;height:38px;padding-left:8px;border:1px solid #ccc}.login-box .input-group .del-icon{display:none;position:absolute;font-size:14px;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);text-align:center;background:#6e3800;color:#fff;width:12px;height:12px;line-height:10px;border-radius:12px;top:13px;left:336px;cursor:pointer}.login-box .input-group .tip{position:absolute;display:none;font-size:13px}.login-box .input-group.err .ipt{border-color:#6e3800}.login-box .input-group.err .del-icon{display:block}.login-box .input-group.err .tip{display:block;color:#6e3800;line-height:30px;padding-left:8px}.login-box .next{width:362px;height:40px;margin-top:10px;border:none;text-align:center;font-size:16px;color:#fff;background:#6e3800;cursor:pointer}.login-box .input-group.remd{margin-top:0;padding-bottom:2px}.login-box .input-group.remd #remd{display:none}.login-box .input-group.remd .check{float:left;width:14px;height:14px;border:2px solid #6e3800;cursor:pointer;position:relative;top:6px;margin:0 10px 0 0}.login-box .input-group.remd .check.checked:after{display:block;content:'\\F00C';font-weight:400;font-size:11px;line-height:12px;text-align:center;background:#6e3800;color:#fff}.login-box .input-group.remd .instruct{font-size:14px;color:#999}.login-box .input-group.remd .a-group{float:right;font-size:14px;margin-top:0;color:#ccc}.login-box .input-group.remd .a-group a{color:#999}.login-box .input-group.remd .a-group a:last-child{padding-left:7px}.login-box .input-group.remd .a-group a:first-child{padding-right:7px}",""])},224:function(e,a,n){"use strict";n(225);var t=n(17),m=n(227),i=n(231),r=n(234),o=t.createClass({displayName:"Footer",render:function(){return t.createElement("div",{className:"footer"},t.createElement(m,null),t.createElement(r,null),t.createElement(i,null))}});e.exports=o},225:function(e,a,n){var t=n(226);"string"==typeof t&&(t=[[e.id,t,""]]);n(6)(t,{singleton:!1});t.locals&&(e.exports=t.locals)},226:function(e,a,n){a=e.exports=n(4)(),a.push([e.id,".footer{margin-top:40px}",""])},227:function(e,a,n){"use strict";n(228);var t=n(230),m=n(17),i=m.createClass({displayName:"FooterIcon",render:function(){return m.createElement("div",{className:"footer-icon"},m.createElement("img",{src:t,title:"郑重承诺"}))}});e.exports=i},228:function(e,a,n){var t=n(229);"string"==typeof t&&(t=[[e.id,t,""]]);n(6)(t,{singleton:!1});t.locals&&(e.exports=t.locals)},229:function(e,a,n){a=e.exports=n(4)(),a.push([e.id,".footer-icon{padding:40px 0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;text-align:center}.footer-icon>img{width:750px}",""])},230:function(e,a,n){e.exports=n.p+"img/user/footer-icon.png"},231:function(e,a,n){"use strict";n(232);var t=n(17),m=t.createClass({displayName:"FooterRights",render:function(){return t.createElement("div",{className:"footer-rights"},t.createElement("div",null,t.createElement("span",null,"© 2015 万木家™ 版权所有 | "),t.createElement("a",{href:"http://www.miit.gov.cn/",target:"_blank"},"京ICP备15040704号")),t.createElement("div",null,"北京静雅居科技有限公司"))}});e.exports=m},232:function(e,a,n){var t=n(233);"string"==typeof t&&(t=[[e.id,t,""]]);n(6)(t,{singleton:!1});t.locals&&(e.exports=t.locals)},233:function(e,a,n){a=e.exports=n(4)(),a.push([e.id,".footer-rights{margin:10px auto;font-size:12px;color:#888;text-align:center}.footer-rights a{color:#888;text-decoration:none}.footer-rights a:hover{color:dimgray}",""])},234:function(e,a,n){"use strict";n(235);var t=n(17),m=t.createClass({displayName:"FooterLink",getDefaultProps:function(){return{links:[[{title:"用户指南",link:"#"},{title:"使用流程",link:"/about#progress"},{title:"用户条款",link:"/about#useterms"}],[{title:"企业指南",link:"#"},{title:"企业入驻",link:"/vendor/register"},{title:"平台服务",link:"/about#server"}],[{title:"关于我们",link:"#"},{title:"联系方式",link:"/about#contact"},{title:"平台介绍",link:"/about#intro"}]]}},render:function(){return t.createElement("div",{className:"footer-link"},this.props.links.map(function(e,a){return t.createElement("ul",{className:"link-group",key:a},e.map(function(e,n){return t.createElement("li",{key:a+"."+n},t.createElement("a",{href:0===n?null:e.link,className:0===n?"title":null},e.title))}))}))}});e.exports=m},235:function(e,a,n){var t=n(236);"string"==typeof t&&(t=[[e.id,t,""]]);n(6)(t,{singleton:!1});t.locals&&(e.exports=t.locals)},236:function(e,a,n){a=e.exports=n(4)(),a.push([e.id,".footer-link{margin:10px auto;width:900px;overflow:hidden}.footer-link .link-group{float:left;padding:0;margin:10px auto;width:300px;text-align:center;list-style:none}.footer-link .link-group>li{margin:20px 0}.footer-link .link-group>li>a.title{font-size:18px;color:#333}.footer-link .link-group>li>a:not(.title){color:#666;text-decoration:none}.footer-link .link-group>li>a:not(.title):hover{color:#474747}",""])},237:function(e,a,n){"use strict";n(238);var t=n(17),m=n(240),i=n(244),r=t.createClass({displayName:"FloatBottomTip",compareBarAddItem:function(e){this.refs.compareBar.addItem(e)},componentDidMount:function(){},render:function(){return t.createElement("div",{className:"float-bottom-tip"},t.createElement(i,{ref:"compareBar"}),t.createElement(m,null))}});e.exports=r},238:function(e,a,n){var t=n(239);"string"==typeof t&&(t=[[e.id,t,""]]);n(6)(t,{singleton:!1});t.locals&&(e.exports=t.locals)},239:function(e,a,n){a=e.exports=n(4)(),a.push([e.id,".float-bottom-tip{position:fixed;bottom:20px;right:40px;z-index:200}.float-bottom-tip>div{background-color:hsla(0,0%,100%,.7);width:36px;height:36px;line-height:36px;border-radius:36px;text-align:center;border:1px solid #ccc;cursor:pointer;margin-bottom:2px;-webkit-transition:background .6s;transition:background .6s;color:#666;font-size:12px}.float-bottom-tip>div:hover{background-color:#ccc;color:#000}",""])},240:function(e,a,n){"use strict";n(241);var t=n(17),m=t.createClass({displayName:"BackTop",handleClick:function(){this.timer=setInterval(function(){var e=document.documentElement.scrollTop||document.body.scrollTop;e-=70,e>0?window.scrollTo(0,e):(window.scrollTo(0,0),clearInterval(this.timer))}.bind(this),1)},render:function(){return t.createElement("div",{className:"back-top",onClick:this.handleClick},t.createElement("div",{className:"back-top-tip"},"返回顶部"))}});e.exports=m},241:function(e,a,n){var t=n(242);"string"==typeof t&&(t=[[e.id,t,""]]);n(6)(t,{singleton:!1});t.locals&&(e.exports=t.locals)},242:function(e,a,n){a=e.exports=n(4)(),a.push([e.id,".back-top{background-image:url("+n(243)+");background-repeat:no-repeat;background-size:50% auto;background-position:center;position:relative}.back-top .back-top-tip{position:absolute;width:2.5em;line-height:1em;left:40px;top:3px}",""])},243:function(e,a,n){e.exports=n.p+"img/user/back_top_icon.png"},244:function(e,a,n){"use strict";n(245);var t=n(17),m=n(181),i=n(8),r=i.setCookie,o=i.getCookie,l=t.createClass({displayName:"CompareBar",getInitialState:function(){return{show:!1,data:[],errTip:null}},show:function(){this.setState({show:!0})},hide:function(){this.setState({show:!1})},toggle:function(){this.setState({show:!this.state.show})},addItem:function(e){if(this.show(),e.is_suite)return this.setErrTip("套件不可对比，请选择单件商品对比～"),!1;for(var a=0;a<this.state.data.length;a++)if(this.state.data[a].id==e.id)return this.setErrTip("该商品已在对比栏，请选择其他商品添加对比哦！"),!1;if(3==this.state.data.length)return this.setErrTip("对比栏已满，你可以先删除烂内商品再添加哦！"),!1;var n=this.state.data;n.push(e),this.setState({data:n});var t=o("compareItems"),m=t?t.split(","):[];m.push(e.id.toString());var i=m.join(","),l=new Date;r("compareItems",i,l.setHours(l.getHours()+720),"/")},deleteItem:function(e){for(var a,n=0;n<this.state.data.length;n++)if(this.state.data[n].id==e){a=n;break}var t=this.state.data;t.splice(a,1),this.setState({data:t});var m=o("compareItems"),i=m?m.split(","):[];if(i[a]==e){i.splice(a,1);var l=i.join(","),s=new Date;r("compareItems",l,s.setHours(s.getHours()+720),"/")}},deleteAll:function(){this.setState({data:[]}),this.hide();var e=new Date;r("compareItems","",e.setHours(e.getHours()+720),"/")},getItem:function(e,a){m({url:"/item/"+e,method:"get",data:{format:"json"},success:function(n){var t=this.state.data;t[a]=n,t[a].id=e,this.setState({data:t})}.bind(this)})},componentDidMount:function(){var e=o("compareItems");if(e)for(var a=e.split(","),n=0;n<a.length;n++)this.getItem(a[n],n)},setErrTip:function(e){this.setState({errTip:e}),setTimeout(function(){this.setState({errTip:null})}.bind(this),5e3)},render:function(){return t.createElement("div",{className:"compare-bar-wrap"},t.createElement("span",{className:"compare-bar-btn",onClick:this.toggle},"对比"),t.createElement("div",{className:(this.state.show?"show ":"")+"compare-bar"},t.createElement(s,{errTip:this.state.errTip,hide:this.hide}),t.createElement(c,{data:this.state.data,"delete":this.deleteItem,deleteAll:this.deleteAll})))}}),s=t.createClass({displayName:"CompareBarHeader",render:function(){var e=null;return this.props.errTip&&(e=t.createElement("div",{className:"err-tip"},this.props.errTip)),t.createElement("div",{className:"cb-header"},t.createElement("h1",null,"对比栏"),t.createElement("div",{className:"close-btn",onClick:this.props.hide},"隐藏"),e)}}),c=t.createClass({displayName:"CompareBarContent",render:function(){return t.createElement("div",{className:"cb-content"},t.createElement(p,{num:"1",data:this.props.data[0],"delete":this.props["delete"]}),t.createElement(p,{num:"2",data:this.props.data[1],"delete":this.props["delete"]}),t.createElement(p,{num:"3",data:this.props.data[2],"delete":this.props["delete"]}),t.createElement(d,{deleteAll:this.props.deleteAll}))}}),p=t.createClass({displayName:"CompareBarItem",render:function(){return this.props.data?t.createElement("div",{className:"cb-item"},t.createElement("a",{href:"/item/"+this.props.data.id},t.createElement("div",{className:"pic"},t.createElement("img",{src:this.props.data.image_url,alt:this.props.data.item})),t.createElement("div",{className:"detail"},t.createElement("h2",{className:"title"},this.props.data.item),t.createElement("div",{className:"price"},this.props.data.price/1e4,"万"))),t.createElement("div",{className:"delete",onClick:this.props["delete"].bind(null,this.props.data.id)},"删除")):t.createElement("div",{className:"cb-item null"},t.createElement("div",{className:"num-box"},this.props.num),t.createElement("div",{className:"null-tip"},"你还可以继续添加"))}}),d=t.createClass({displayName:"CompareBarOperation",render:function(){return t.createElement("div",{className:"cb-operation"},t.createElement("a",{className:"compare-link",target:"_blank",href:"/item/compare"},"对比"),t.createElement("div",{className:"delete-all",onClick:this.props.deleteAll},"清空对比栏"))}});e.exports=l},245:function(e,a,n){var t=n(246);"string"==typeof t&&(t=[[e.id,t,""]]);n(6)(t,{singleton:!1});t.locals&&(e.exports=t.locals)},246:function(e,a,n){a=e.exports=n(4)(),a.push([e.id,".compare-bar-wrap{position:relative}.compare-bar-wrap .compare-bar-btn{display:inline-block;width:36px;height:36px;line-height:36px;border-radius:36px;text-align:center}.compare-bar-wrap .compare-bar.show{width:898px;border-width:1px}.compare-bar-wrap .compare-bar{position:fixed;height:158px;width:0;border:1px solid #e6e6e6;border-width:0;right:50%;margin-right:-450px;bottom:16px;background:#fff;cursor:default;overflow:hidden;-webkit-transition:width .5s;transition:width .5s}.compare-bar-wrap .compare-bar .cb-header{position:relative;height:38px;width:100%;line-height:38px;border-bottom:1px solid #e6e6e6}.compare-bar-wrap .compare-bar .cb-header h1{font-size:14px;font-weight:400;color:#666;padding:0 0 0 16px;margin:0;text-align:left}.compare-bar-wrap .compare-bar .cb-header .close-btn{position:absolute;right:12px;top:0;font-size:12px;color:#afafaf;cursor:pointer}.compare-bar-wrap .compare-bar .cb-header .close-btn:hover{color:#666}.compare-bar-wrap .compare-bar .cb-header .err-tip{position:absolute;top:0;width:60%;text-align:center;height:100%;left:20%;color:#d50915}.compare-bar-wrap .compare-bar .cb-content{height:119px;width:100%;padding:14px 0}.compare-bar-wrap .compare-bar .cb-content .cb-item{position:relative;height:100%;width:258px;float:left;border-right:1px solid #e6e6e6}.compare-bar-wrap .compare-bar .cb-content .cb-item .pic{height:90px;width:90px;margin-left:10px;float:left}.compare-bar-wrap .compare-bar .cb-content .cb-item .pic img{height:100%;width:100%}.compare-bar-wrap .compare-bar .cb-content .cb-item .detail{float:left;height:100%;width:125px;margin-left:10px;padding-top:20px}.compare-bar-wrap .compare-bar .cb-content .cb-item .detail .title{text-align:left;font-size:14px;line-height:1.2em;font-weight:400;color:#777;margin:0}.compare-bar-wrap .compare-bar .cb-content .cb-item .detail .title:hover{color:#000}.compare-bar-wrap .compare-bar .cb-content .cb-item .detail .price{margin-top:10px;text-align:left;font-size:14px;line-height:1.2em;color:#cf0a0a}.compare-bar-wrap .compare-bar .cb-content .cb-item .delete{position:absolute;right:10px;bottom:12px;font-size:13px;line-height:1.2em;color:#96623f;cursor:pointer}.compare-bar-wrap .compare-bar .cb-content .cb-item .delete:hover{color:#833e00}.compare-bar-wrap .compare-bar .cb-content .cb-item.null .num-box{float:left;background:#f5f5f5;width:60px;height:60px;margin:15px 0 0 15px;font-size:50px;color:#cacccc;line-height:60px;text-align:center}.compare-bar-wrap .compare-bar .cb-content .cb-item.null .null-tip{float:left;width:150px;line-height:1.2em;font-size:14px;color:#ccc;text-align:left;padding-left:10px;margin-top:20px}.compare-bar-wrap .compare-bar .cb-content .cb-operation{float:left;width:120px;padding-top:14px}.compare-bar-wrap .compare-bar .cb-content .cb-operation .compare-link{display:block;height:30px;width:70px;margin:0 auto;line-height:30px;text-align:center;font-size:14px;background:#96623f;color:#fff;cursor:pointer}.compare-bar-wrap .compare-bar .cb-content .cb-operation .compare-link:hover{background:#833e00}.compare-bar-wrap .compare-bar .cb-content .cb-operation .delete-all{cursor:pointer;font-size:13px;margin-top:10px;color:#96623f}.compare-bar-wrap .compare-bar .cb-content .cb-operation .delete-all:hover{color:#833e00}",""])},333:function(e,a,n){e.exports=n.p+"../templates/user/profile.html"},334:function(e,a,n){var t=n(335);"string"==typeof t&&(t=[[e.id,t,""]]);n(6)(t,{singleton:!1});t.locals&&(e.exports=t.locals)},335:function(e,a,n){a=e.exports=n(4)(),a.push([e.id,".clearfix:after{display:table;content:'';clear:both}a{color:#833e00}a:hover{color:#5a2b00}.wrapper{margin:0 auto;width:1200px}.favorite .item .title,.overflow{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.button,.favorite .item .compare,.favorite .item .unfavorite,.form-validate button,.security .sec-main .main-bd>form>button{border:none}.button:focus,.favorite .item .compare:focus,.favorite .item .unfavorite:focus,.form-validate button:focus,.form-validate input:focus,.input:focus,.security .sec-main .main-bd>form>button:focus{outline:none}.banner{background-color:#6e3800}.banner>.container{height:80px}.banner>.container .logo,.banner>.container .logo .img,.banner>.container .logo>.title,.banner>.container .tabs{display:inline-block}.banner>.container .logo{padding:8px 0;height:100%;text-align:center}.banner>.container .logo .img{margin-right:10px;width:120px;height:54px;background:url("+n(336)+") no-repeat;background-size:contain;font-size:0;vertical-align:middle}.banner>.container .logo>.title{padding:0 12px;width:120px;height:100%;border-left:1px solid #fff;vertical-align:middle;box-sizing:content-box}.banner>.container .logo>.title>p{margin:2px auto;font-size:18px;color:#fff}.banner>.container .logo>.title>a{padding:4px 8px;border:1px solid hsla(0,0%,100%,.35);border-radius:20px;font-size:12px;color:hsla(0,0%,100%,.35)}.banner>.container .tabs{margin-left:10px;font-size:16px}.banner>.container .tabs .tab-btn{margin:0 40px;color:hsla(0,0%,100%,.35)}.banner>.container .tabs .tab-btn.active,.banner>.container .tabs .tab-btn:hover{color:#f2f2f2}.favorite{padding-top:15px}.favorite .item{padding:15px 30px;margin:15px auto;height:120px;border:1px solid #ccc;background-color:#f5f5f5}.favorite .item>a{color:inherit}.favorite .item .price,.favorite .item .thumb,.favorite .item .title{display:inline-block}.favorite .item .thumb{width:90px;height:90px;font-size:0;vertical-align:middle}.favorite .item .title{margin:0 30px;width:360px;text-align:center;vertical-align:middle;color:#666;text-decoration:none}.favorite .item .title:hover{color:#474747}.favorite .item .price{width:140px;text-align:center;vertical-align:middle;color:#cf0a0a}.favorite .item .compare,.favorite .item .unfavorite{color:#666;background-color:#f5f5f5}.favorite .item .compare:hover,.favorite .item .unfavorite:hover{color:#474747}.favorite .item .compare{margin-left:270px}.favorite .item .unfavorite{margin-left:60px}.favorite .pagination{display:block;margin-top:30px;text-align:center}.form-validate{margin:0 auto;width:340px;height:70px;font-size:14px}.form-validate button,.form-validate input{display:inline-block}.form-validate input{padding:0 8px;width:340px;height:40px;border:1px solid #ccc}.form-validate input.verify{width:210px;margin-right:10px}.form-validate button{width:120px;height:40px;background-color:#f2f2f2;border:1px solid #ccc;color:#666;-webkit-transition:background-color .2s ease;transition:background-color .2s ease}.form-validate button:hover:not(.disabled){background-color:#e8e8e8}.form-validate button:active:not(.disabled){background-color:#e3e3e3}.form-validate button.disabled{background-color:#d8d8d8;color:#777}.form-validate .input-tip{display:block;margin-top:4px;height:20px;font-size:13px;color:#833e00}.form-validate .input-tip.success{color:#666}.security{padding:40px 180px;margin-top:40px;background-color:#f5f5f5}.security .sec-title{margin-bottom:30px;color:#833e00;font-size:18px;text-align:center}.security .sec-main .main-content{margin:25px auto;background-color:#fff}.security .sec-main .main-hd{padding:0 40px;height:60px;line-height:60px;cursor:pointer}.security .sec-main .main-hd .main-hd-title{display:inline-block;width:80px}.security .sec-main .main-hd .main-hd-btn{float:right;color:#833e00;font-size:14px}.security .sec-main .main-bd{padding:40px 0;border-top:1px solid #ccc}.security .sec-main .main-bd>form>button{display:block;margin:5px auto 0;width:340px;height:40px;background-color:#833e00;border:1px solid #833e00;color:#fff;-webkit-transition:background-color .2s ease;transition:background-color .2s ease}.security .sec-main .main-bd>form>button:hover{background-color:#6f3400}.security .sec-main .main-bd>form>button:active{background-color:#643000}",""])},336:function(e,a,n){e.exports=n.p+"img/user/logo_white.png"},337:function(e,a,n){(function(a){"use strict";var n=a.createClass({displayName:"Banner",getDefaultProps:function(){return{tabs:["收藏夹","账户设置"]}},render:function(){return a.createElement("div",{className:"banner"},a.createElement("div",{className:"container"},a.createElement(t,null),a.createElement(m,{items:this.props.tabs,active:this.props.active,onClick:this.props.onClick})))}}),t=a.createClass({displayName:"Logo",render:function(){return a.createElement("div",{className:"logo"},a.createElement("a",{href:"/"},a.createElement("div",{className:"img"},"logo")),a.createElement("div",{className:"title"},a.createElement("p",null,"我的万木家"),a.createElement("a",{href:"/",title:"返回首页"},"返回万木家首页")))}}),m=a.createClass({displayName:"TabsBtn",
render:function(){var e=this;return a.createElement("div",{className:"tabs"},this.props.items.map(function(n,t){var m="tab-btn";return e.props.active===t&&(m+=" active"),a.createElement("a",{className:m,href:1===t?"#my":"#favorite",title:n,key:t,onClick:e.props.onClick.bind(null,t)},n)}))}});e.exports=n}).call(a,n(17))},338:function(e,a,n){(function(a){"use strict";var t=n(181),m=n(339),i=a.createClass({displayName:"Favorite",getInitialState:function(){return{items:[],pages:null,activePage:null}},componentDidMount:function(){this.getInitialItems()},getItemsByPage:function(e,a){var n=this;t({url:"/collection",method:"get",data:{page:e},success:function(t){a&&a(t),n.setState({items:t.collections,pages:t.pages,activePage:e})}})},addFav:function(e){t({url:"/collection",method:"post",data:{item:e},success:function(e){console.log(e)}})},getInitialItems:function(){this.getItemsByPage(1)},handlePageChanged:function(e){this.getItemsByPage(e)},render:function(){var e=this;return a.createElement("div",{className:"favorite"},this.state.items.map(function(n,t){return a.createElement(r,{item:n,key:t,getItemsByPage:e.getItemsByPage,activePage:e.state.activePage,handleCompare:e.props.handleCompare})}),a.createElement(m,{pages:this.state.pages,activePage:this.state.activePage,selected:this.handlePageChanged,quickGo:!0}))}}),r=a.createClass({displayName:"Item",handleCompare:function(e){this.props.handleCompare(e)},formatPrice:function(e){return e/1e4>=1?(e/1e4).toFixed(2)+"万":e.toFixed(2)+"元"},handleUnfavBtnClick:function(e){var a=this;t({url:"/collection",method:"delete",data:{item:e},success:function(e){e.success&&a.props.getItemsByPage(a.props.activePage)}})},render:function(){var e={background:"url("+this.props.item.image_url+") no-repeat",backgroundSize:"cover"};return a.createElement("div",{className:"item"},a.createElement("a",{href:"item/"+this.props.item.id,className:"thumb",style:e,alt:this.props.item.item,title:this.props.item.item},this.props.item.item),a.createElement("a",{href:"item/"+this.props.item.id,className:"title",title:this.props.item.item},this.props.item.item),a.createElement("span",{className:"price"},this.formatPrice(this.props.item.price)),a.createElement("button",{className:"compare",title:"对比",onClick:this.handleCompare.bind(null,this.props.item)},"对比"),a.createElement("button",{className:"unfavorite",title:"取消收藏",onClick:this.handleUnfavBtnClick.bind(null,this.props.item.id)},"取消收藏"))}});e.exports=i}).call(a,n(17))},339:function(e,a,n){(function(a){"use strict";var t=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e};n(340);var m=a.createClass({displayName:"Pagination",propTypes:{pages:a.PropTypes.number},getInitialState:function(){return{activePage:this.props.activePage}},getDefaultProps:function(){return{activePage:1,first:null,prev:"上一页",basePages:2,midPages:5,ellipsis:!0,next:"下一页",last:null,theme:"light",quickGo:!1,selected:function(e){console.log("当前页："+e)}}},componentWillReceiveProps:function(e){e.activePage!==this.props.activePage&&this.setActivePage(e.activePage)},setActivePage:function(e){this.setState({activePage:e})},render:function(){var e="light"===this.props.theme?"pagination":"pagination "+this.props.theme;return a.createElement("div",{className:e},a.createElement(i,t({},this.props,{activePage:this.state.activePage,setActivePage:this.setActivePage})),this.props.quickGo?a.createElement(o,{pages:this.props.pages}):null,this.props.quickGo?a.createElement(l,{pages:this.props.pages,setActivePage:this.setActivePage}):null)}}),i=a.createClass({displayName:"PagiMain",getInitialState:function(){return{pageItems:this.getPageItems(this.props.activePage)}},componentWillReceiveProps:function(e){if(e.activePage!==this.props.activePage||e.pages!==this.props.pages){var a=this.getPageItems(e.activePage,e);this.setState({pageItems:a}),e.activePage!==this.props.activePage&&this.props.selected(e.activePage)}},handleItemClick:function(e,a,n){a="first"===e?1:"prev"===e?1===this.props.activePage?1:this.props.activePage-1:"next"===e?this.props.activePage===this.props.pages?this.props.pages:this.props.activePage+1:"last"===e?this.props.pages:a>this.props.pages?this.props.pages:a,a!==this.props.activePage&&this.props.setActivePage(a)},getPageItems:function(e,a){var n=[],t=a?a.basePages:this.props.basePages,m=a?a.midPages:this.props.midPages,i=a?a.pages:this.props.pages;return e<=parseInt(m/2)+1?(n=this._getSeriesNumber(1,t+m>=i?i:m),i>t+m&&n.push(0)):e<=parseInt(m/2)+1+t||t+m>=i?(n=this._getSeriesNumber(1,t+m>=i?i:e+2),i>t+m&&n.push(0)):e<i-parseInt(m/2)-1?(n=this._getSeriesNumber(1,a?a.basePages:this.props.basePages),n.push(0),n=n.concat(this._getSeriesNumber(e-2,m)),i>m+t+2&&n.push(0)):e===i-parseInt(m/2)-1?(n=this._getSeriesNumber(1,a?a.basePages:this.props.basePages),n.push(0),n=n.concat(this._getSeriesNumber(i-m,m+1))):(n=this._getSeriesNumber(1,a?a.basePages:this.props.basePages),n.push(0),n=n.concat(this._getSeriesNumber(i-m+1,m))),n},_getSeriesNumber:function(e,a){e=e,a=a;for(var n=[];a--;)n.push(e++);return n},render:function(){var e=[],n=[];return this.props.pages>0&&(this.props.first&&e.push(a.createElement(r,{key:"first",text:this.props.first,disabled:1===this.props.activePage?!0:!1,type:"first",changePage:this.handleItemClick.bind(this,"first")})),this.props.prev&&e.push(a.createElement(r,{key:"prev",text:this.props.prev,disabled:1===this.props.activePage?!0:!1,type:"prev",changePage:this.handleItemClick.bind(this,"prev")})),this.props.next&&n.push(a.createElement(r,{key:"next",text:this.props.next,type:"next",disabled:this.props.activePage===this.props.pages?!0:!1,changePage:this.handleItemClick.bind(this,"next")})),this.props.last&&n.push(a.createElement(r,{key:"last",text:this.props.last,type:"last",disabled:this.props.activePage===this.props.pages?!0:!1,changePage:this.handleItemClick.bind(this,"last")}))),a.createElement("ul",{className:"pagi-main"},e,this.props.pages>0&&this.state.pageItems.map(function(e,n){return a.createElement(r,{key:n,text:e,type:e?"num":"dot",active:e===this.props.activePage?!0:!1,changePage:e?this.handleItemClick.bind(this,"num",e):null})}.bind(this)),n)}}),r=a.createClass({displayName:"PaginationBtn",getDefaultProps:function(){return{text:1,type:"num"}},render:function(){var e="dot"===this.props.type?"...":this.props.text,n=this.props.active?"item active":"item";return"num"!==this.props.type&&(n+=" page "+this.props.type),this.props.disabled&&(n+=" disabled"),a.createElement("li",{className:n,onClick:this.props.changePage},a.createElement("a",null,e))}}),o=a.createClass({displayName:"PagiOverview",render:function(){return a.createElement("div",{className:"overview"},"共 ",this.props.pages," 页，")}}),l=a.createClass({displayName:"PagiQuickGo",getInitialState:function(){return{pageInput:null}},inputChange:function(e){this.setState({pageInput:e.target.value})},quickGo:function(){if(this.state.pageInput){var e=+this.state.pageInput;e=1>e?1:e,e=e>this.props.pages?this.props.pages:e,this.props.setActivePage(e)}},render:function(){return a.createElement("div",{className:"quick-go"},a.createElement("span",null,"到第"),a.createElement("input",{className:"go-page",type:"number",min:"1",max:this.props.pages,onChange:this.inputChange}),a.createElement("span",null,"页"),a.createElement("button",{className:"go-submit",onClick:this.quickGo},"确认"))}});e.exports=m}).call(a,n(17))},340:function(e,a,n){var t=n(341);"string"==typeof t&&(t=[[e.id,t,""]]);n(6)(t,{singleton:!1});t.locals&&(e.exports=t.locals)},341:function(e,a,n){a=e.exports=n(4)(),a.push([e.id,".pagination{padding-right:10px}.pagination,.pagination .item,.pagination .overview,.pagination .pagi-main,.pagination .quick-go{display:inline-block;padding:0;margin:0}.pagination .overview,.pagination .pagi-main,.pagination .quick-go{vertical-align:middle}.pagination .item{width:35px;height:35px;margin-left:-1px;border:1px solid #e2e2e2;background-color:#fff;line-height:35px;text-align:center;cursor:pointer;-webkit-transition:border-color .1s ease,color .1s ease;transition:border-color .1s ease,color .1s ease}.pagination .item>a{color:inherit}.pagination .item:not(.dot):not(.active):not(.disabled):hover{color:#6e3800;border-color:#6e3800}.pagination .item:not(.dot):not(.active):not(.disabled):hover:not(.page)+.item:not(.page){border-left-color:#6e3800}.pagination .item.active{border-color:#6e3800;background-color:#6e3800;color:#fff;cursor:default}.pagination .item.disabled{color:#bbb}.pagination .item.page{width:auto;padding:0 8px}.pagination .item.dot{margin:0;border:none;cursor:default}.pagination .item.dot+.page{margin-left:0}.pagination .item.first,.pagination .item.prev{margin-left:0;margin-right:5px}.pagination .item.last,.pagination .item.next{margin-left:5px}.pagination .overview{margin-left:15px;color:#a0a0a0;font-size:14px}.pagination .overview span{vertical-align:middle}.pagination .quick-go{color:#a0a0a0;font-size:14px}.pagination .quick-go span{vertical-align:middle}.pagination .quick-go input{padding-left:3px;margin:0 5px;width:30px;color:#a0a0a0;text-align:center}.pagination .quick-go .go-submit,.pagination .quick-go input{border:1px solid #e2e2e2;background-color:#fff;vertical-align:middle}.pagination .quick-go .go-submit{font-size:14px;margin-left:8px;color:#444}.pagination .quick-go .go-submit:hover{color:#6e3800;border-color:#6e3800;cursor:pointer}.pagination .quick-go .go-submit:focus{outline:none}.pagination.dark .item{color:#fafafa;border-color:#322827;background-color:#231716}.pagination.dark .item:not(.dot):not(.active):not(.disabled):hover{color:#969696;border-color:hsla(0,0%,100%,.2);background-color:#322827}.pagination.dark .item:not(.dot):not(.active):not(.disabled):hover:active{background-color:#241d1c}.pagination.dark .item:not(.dot):not(.active):not(.disabled):hover:not(.page)+.item:not(.page){border-left-color:hsla(0,0%,100%,.2)}.pagination.dark .item.active{background-color:#322827;color:#969696}.pagination.dark .item.disabled{color:hsla(0,0%,100%,.2)}.pagination.dark .item>a{color:inherit}.pagination.dark .quick-go .go-page{border-color:hsla(0,0%,100%,.1);background-color:#291b1a}.pagination.dark .quick-go .go-page:focus{outline:none}.pagination.dark .quick-go .go-submit{color:#fafafa;border-color:#322827;background-color:#231716}.pagination.dark .quick-go .go-submit:hover{color:#969696;background-color:#322827}.pagination.dark .quick-go .go-submit:active{background-color:#241d1c}",""])},342:function(e,a,n){(function(a){"use strict";var t=n(8),m=n(181),i={phone:{rule:t.getRegs("mobile"),text:"请输入正确的手机号码"},verify:{rule:t.getRegs("captcha"),text:"请输入正确的验证码"},username:{rule:t.getRegs("nickname"),text:'会员名为大小写字母、数字或"_"的组合'},email:{rule:t.getRegs("email"),text:"请输入正确的邮箱"},password:{rule:t.getRegs("userPassword"),text:'6-16 位，大小写字母、数字及 "_" 、"." 的组合'}},r=n(343),o=a.createClass({displayName:"Security",render:function(){return a.createElement("div",{className:"security"},a.createElement(l,null),a.createElement(s,null))}}),l=a.createClass({displayName:"SecTitle",render:function(){return a.createElement("div",{className:"sec-title"},a.createElement("h2",null,"基本信息"))}}),s=a.createClass({displayName:"SecMain",getInitialState:function(){return{active:null,timeLeft:parseInt(t.getCookie("profile_time_left"))||0,mainHdText:[],usernameRevisable:!0}},getDefaultProps:function(){return{mainHd:[{title:"会员名：",btn:"修改（只能修改一次）",type:"username"},{title:"手机号：",btn:null,type:null},{title:"邮箱：",btn:"绑定邮箱",type:"email"},{title:"密码：",btn:"修改密码",type:"password"}]}},componentWillMount:function(){var e=this;m({url:"/logined",method:"get",success:function(a){a.logined&&e.setState({mainHdText:[a.username,a.mobile,a.email,"• • • • • •"],usernameRevisable:a.username_revisable,emailConfirmed:a.email_confirmed})}})},handleHdClick:function(e,a){a&&(e===this.state.active&&(e=null),this.setState({active:e}))},sendVerify:function(e,a){var n=this;this.state.timeLeft||m({url:"/service/mobile_sms_login_required?type=USER_SMS_CAPTCHA",method:"post",data:{csrf_token:t.getCookie("csrf_token"),mobile:e},success:function(e){e.success&&(a.setTip("发送成功，请查收","success"),n.setState({timeLeft:60}),!n.timer&&n.setTimer())}})},setTimer:function(){var e=new Date;e.setSeconds(e.getSeconds()+60),this.timer=setInterval(function(){var a=--this.state.timeLeft;this.setState({timeLeft:a}),t.setCookie("profile_time_left",a,e,"/profile"),0===a&&(clearInterval(this.timer),this.timer=0)}.bind(this),1e3)},render:function(){var e=this;return!this.timer&&this.state.timeLeft>0&&this.setTimer(),a.createElement("div",{className:"sec-main"},this.props.mainHd.map(function(n,t){return a.createElement("div",{className:"main-content",key:t},a.createElement(c,{item:n,text:e.state.mainHdText[t],onClick:e.handleHdClick.bind(null,t),active:e.state.active===t,usernameRevisable:e.state.usernameRevisable}),e.state.active!==t||!e.state.usernameRevisable&&0===t?null:a.createElement(p,{item:n,timeLeft:e.state.timeLeft,sendVerify:e.sendVerify,usernameRevisable:e.state.usernameRevisable,emailConfirmed:e.state.emailConfirmed,phone:e.state.mainHdText[1],email:e.state.mainHdText[2]}))}))}}),c=a.createClass({displayName:"SecMainHd",render:function(){var e=void 0;return e=this.props.usernameRevisable||"username"!==this.props.item.type?this.props.active?"收起":"email"===this.props.item.type&&this.props.text?"修改邮箱":this.props.item.btn:"您已修改过会员名，现在无法修改",a.createElement("div",{className:"main-hd",onClick:this.props.onClick.bind(null,this.props.item.btn),title:this.props.item.btn?"点击"+this.props.item.btn:null},a.createElement("span",{className:"main-hd-title"},this.props.item.title),a.createElement("span",{className:"main-hd-text"},this.props.text),a.createElement("span",{className:"main-hd-btn"},e))}}),p=a.createClass({displayName:"SecMainBd",render:function(){var e=void 0;switch(this.props.item.type){case"username":e=a.createElement(d,{timeLeft:this.props.timeLeft,sendVerify:this.props.sendVerify,phone:this.props.phone});break;case"email":e=a.createElement(h,{timeLeft:this.props.timeLeft,sendVerify:this.props.sendVerify,emailConfirmed:this.props.emailConfirmed,phone:this.props.phone,email:this.props.email});break;case"password":e=a.createElement(u,{timeLeft:this.props.timeLeft,sendVerify:this.props.sendVerify});break;default:return e=null,null}return a.createElement("div",{className:"main-bd"},e)}}),d=a.createClass({displayName:"UsernameBd",handleSbtClick:function(){var e=this.refs.refPhone.getValue(),a=this.refs.refVerify.getValue(),n=this.refs.refName.getValue();""===e&&this.refs.refPhone.setTip("手机号码不能为空"),""===a&&this.refs.refVerify.setTip("验证码不能为空"),""===n&&this.refs.refName.setTip("会员名不能为空"),e&&a&&n&&this.changeUsername(n,a)},changeUsername:function(e,a){var n=this;m({url:"/settings?type=USER_USERNAME_SETTING",method:"post",data:{csrf_token:t.getCookie("csrf_token"),username:e,captcha:a},success:function(e){e.success?(n.refs.refName.setTip(":) 修改成功","success"),setTimeout(function(){window.location.reload()},1e3)):n.refs.refName.setTip(":( "+e.message,"tip")}})},handleVerifyClick:function(){var e=this.refs.refPhone.getValue();return e?void this.props.sendVerify(e,this.refs.refVerify):void(""===e&&this.refs.refPhone.setTip("手机号码不能为空"))},render:function(){return a.createElement("form",null,a.createElement(r,{placeholder:"请输入你的手机号",ref:"refPhone",validate:i.phone,value:this.props.phone}),a.createElement(r,{placeholder:"请输入短信验证码",ref:"refVerify",theme:"verify",validate:i.verify},a.createElement("button",{type:"button",className:this.props.timeLeft?"disabled":null,onClick:this.handleVerifyClick},this.props.timeLeft?this.props.timeLeft+"s 后可重发":"获取短信验证码")),a.createElement(r,{placeholder:"请输入新会员名",ref:"refName",validate:i.username}),a.createElement("button",{type:"button",className:"username-sbt",onClick:this.handleSbtClick},"修改"))}}),h=a.createClass({displayName:"EmailBd",getInitialState:function(){return{sendEmailTip:null}},handleSbtClick:function(){var e=this.refs.refPhone.getValue(),a=this.refs.refVerify.getValue(),n=this.refs.refEmail.getValue();""===e&&this.refs.refPhone.setTip("手机号码不能为空"),""===a&&this.refs.refVerify.setTip("验证码不能为空"),""===n&&this.refs.refEmail.setTip("邮箱不能为空"),e&&a&&n&&this.changeEmail(n,a)},changeEmail:function(e,a){var n=this;m({url:"/settings?type=USER_EMAIL_SETTING",method:"post",data:{csrf_token:t.getCookie("csrf_token"),email:e,captcha:a},success:function(e){e.success?n.refs.refEmail.setTip(":) 修改成功，请到邮箱中确认绑定","success"):n.refs.refEmail.setTip(":( "+e.message,"tip")}})},sendEmail:function(e){var a=this;m({url:"/service/send_email?type=USER_EMAIL_CONFIRM",method:"post",data:{csrf_token:t.getCookie("csrf_token"),role:"user",email:e},success:function(e){e.success?a.setState({sendEmailTip:"发送成功。请查收 :)"}):a.setState({sendEmailTip:":( 发送失败。"+e.message})}})},handleVerifyClick:function(){var e=this.refs.refPhone.getValue();return e?void this.props.sendVerify(e,this.refs.refVerify):void(""===e&&this.refs.refPhone.setTip("手机号码不能为空"))},render:function(){return this.props.emailConfirmed||!this.props.email?a.createElement("form",null,a.createElement(r,{placeholder:"请输入你的手机号",ref:"refPhone",validate:i.phone,value:this.props.phone}),a.createElement(r,{placeholder:"请输入短信验证码",ref:"refVerify",theme:"verify",validate:i.verify},a.createElement("button",{type:"button",className:this.props.timeLeft?"disabled":null,onClick:this.handleVerifyClick},this.props.timeLeft?this.props.timeLeft+"秒后再次发送":"获取短信验证码")),a.createElement(r,{placeholder:"请输入邮箱地址",ref:"refEmail",validate:i.email}),a.createElement("button",{type:"button",className:"email-sbt",onClick:this.handleSbtClick},"发送验证邮件")):a.createElement("form",null,a.createElement("div",{style:{marginBottom:"20px",textAlign:"center",color:"#666"}},"验证邮件已发送至邮箱，请查收"),a.createElement("div",{style:{marginBottom:"20px",textAlign:"center",color:"#666"}},this.state.sendEmailTip),a.createElement("button",{onClick:this.sendEmail.bind(null,this.props.email)},"重新发送"))}}),u=a.createClass({displayName:"PasswordBd",handleSbtClick:function(){var e=this.refs.refPwd.getValue(),a=this.refs.refNewpwd.getValue(),n=this.refs.refConfirmpwd.getValue();return""===e&&this.refs.refPwd.setTip("密码不能为空"),""===a&&this.refs.refNewpwd.setTip("密码不能为空"),""===n&&this.refs.refConfirmpwd.setTip("密码不能为空"),a!==n?void this.refs.refConfirmpwd.setTip("两次密码不一致"):void(e&&a&&n&&this.changePassword(e,a,n))},changePassword:function(e,a,n){var i=this;m({url:"/settings?type=USER_PASSWORD_SETTING",method:"post",data:{csrf_token:t.getCookie("csrf_token"),old_password:t.encryptMd5(e),password:t.encryptMd5(a),confirm_password:t.encryptMd5(n)},success:function(e){e.success?(i.refs.refConfirmpwd.setTip(":) 密码修改成功，请重新登录。1s后返回登录页","success"),setTimeout(function(){window.location.reload()},2e3)):i.refs.refConfirmpwd.setTip(":( "+e.message,"tip")}})},render:function(){return a.createElement("form",null,a.createElement(r,{placeholder:"当前密码",ref:"refPwd",validate:i.password,inputType:"password"}),a.createElement(r,{placeholder:"新密码",ref:"refNewpwd",validate:i.password,inputType:"password",tip:{status:"success",text:'6-16 位，大小写字母、数字及 "_" 、 "." 的组合'}}),a.createElement(r,{placeholder:"新密码",ref:"refConfirmpwd",validate:i.password,inputType:"password"}),a.createElement("button",{type:"button",className:"username-sbt",onClick:this.handleSbtClick},"确认修改"))}});e.exports=o}).call(a,n(17))},343:function(e,a,n){(function(a){"use strict";var n=a.createClass({displayName:"Validate",getInitialState:function(){return{tip:this.props.tip||null,value:this.props.value?this.props.value:""}},getDefaultProps:function(){return{inputType:"text",validate:null,placeholder:null,theme:"default",value:null}},handleInputBlur:function(e){var a=e.target.value,n=null;this.props.validate&&a&&(this.props.validate.rule.test(a)||(n=this.props.validate.text,a=null),this.setState({tip:n?{status:"error",text:n}:null,value:a}))},getValue:function(){return this.state.value},setTip:function(e,a){this.setState({tip:{status:a||"error",text:e}}),"success"!==a&&"tip"!==a&&this.setState({value:null})},render:function(){return a.createElement("div",{className:"form-validate"},a.createElement(t,{theme:this.props.theme,type:this.props.inputType,onBlur:this.handleInputBlur,placeholder:this.props.placeholder,tip:this.state.tip,value:this.props.value}),this.props.children,a.createElement(m,{tip:this.state.tip}))}}),t=a.createClass({displayName:"ValidateInput",render:function(){var e=document.createElement("input"),n="placeholder"in e,t=this.props.tip&&"success"!==this.props.tip.status&&"tip"!==this.props.tip.status?{borderColor:"#833e00"}:null;return a.createElement("input",{className:"verify"===this.props.theme?"verify":null,type:this.props.type,onBlur:this.props.onBlur,defaultValue:n?null:this.props.placeholder,placeholder:this.props.placeholder,style:t,value:this.props.value})}}),m=a.createClass({displayName:"ValidateTip",render:function(){var e=this.props.tip?"input-tip "+this.props.tip.status:"input-tip";return a.createElement("span",{className:e},this.props.tip?this.props.tip.text:null)}});e.exports=n}).call(a,n(17))}});